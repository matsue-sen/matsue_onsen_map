<%= form_with(model: [onsen, review], local: true, class: "space-y-4") do |f| %>

  <%# 評価選択セクション %>
  <div class="<%= review.errors[:rating].any? ? 'border-red-300' : '' %>">
    <label class="block text-sm font-medium text-gray-700 mb-2">
      評価 <span class="text-red-500">*</span>
    </label>
    <div data-controller="rating-stars" class="inline-block" aria-label="評価選択">
      <%= f.hidden_field :rating, data: { "rating-stars-target": "input" } %>
      <% 1.upto(5) do |i| %>
        <button type="button"
          class="text-xl focus:outline-none transition-colors duration-100 mx-0.5 text-gray-300 hover:text-yellow-400"
          data-action="click->rating-stars#select"
          data-value="<%= i %>"
          data-rating-stars-target="star"
          aria-label="<%= i %>つ星">
          &#9733;
        </button>
      <% end %>
    </div>
    <% if review.errors[:rating].any? %>
      <p class="mt-1 text-sm text-red-600"><%= review.errors[:rating].first %></p>
    <% end %>
    <p class="mt-1 text-sm text-gray-500">1〜5つ星で評価してください</p>
  </div>

  <%# コメント入力セクション %>
  <div class="<%= review.errors[:comment].any? ? 'border-red-300' : '' %>">
    <label for="review_comment" class="block text-sm font-medium text-gray-700 mb-2">
      コメント
    </label>
    <%= f.text_area :comment, 
        rows: 3,
        class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",
        placeholder: "温泉の雰囲気、泉質、設備など、感じたことを自由にお書きください" %>
    <% if review.errors[:comment].any? %>
      <p class="mt-1 text-sm text-red-600"><%= review.errors[:comment].first %></p>
    <% end %>
    <p class="mt-1 text-sm text-gray-500">温泉の感想をお聞かせください（500文字以内）</p>
  </div>

  <%# 画像アップロードセクション %>
  <div>
    <label for="review_images" class="block text-sm font-medium text-gray-700 mb-2">
      画像（任意）
    </label>
    <%= f.file_field :images, 
        multiple: true,
        accept: "image/*",
        class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" %>
    <p class="mt-1 text-sm text-gray-500">複数の画像を選択できます</p>
  </div>

  <%# 送信ボタンエリア %>
  <div class="flex justify-end gap-3 pt-4 border-t border-gray-200">
    <%= link_to "キャンセル", onsen_path(onsen), 
        class: "px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50" %>
    
    <%= f.submit "レビューを投稿", 
        class: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" %>
  </div>
<% end %>
